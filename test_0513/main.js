// 전국 주요 도시 데이터 생성 (위도, 경도, 가중치)
const data = [
  // 서울 지역 (포인트 수 축소)
  [126.9780, 37.5665, 1.0], // 서울 시청
  [127.0276, 37.4979, 0.9], // 강남
  [127.1058, 37.3947, 0.8], // 분당
  [127.0495, 37.5450, 0.9], // 동대문
  [126.9156, 37.5561, 0.8], // 홍대

  // 수도권
  [126.7052, 37.4563, 0.8], // 인천
  [127.0286, 37.7577, 0.7], // 의정부
  [127.1526, 37.4376, 0.8], // 성남
  [127.2145, 37.3851, 0.7], // 광주(경기)
  [127.4902, 37.2752, 0.6], // 이천
  [127.2000, 37.5000, 0.6], // 하남
  [126.8311, 37.4949, 0.6], // 부천
  [127.4906, 37.7370, 0.5], // 남양주
  [126.7831, 37.6136, 0.5], // 김포

  // 강원도 (포인트 대폭 추가)
  [128.5912, 37.7519, 0.5], // 동해
  [128.4562, 38.2048, 0.4], // 속초
  [128.1676, 37.7519, 0.4], // 삼척
  [127.9892, 37.3391, 0.4], // 태백
  [127.7304, 37.8813, 0.5], // 춘천
  [128.2266, 37.4479, 0.4], // 정선
  [128.3076, 37.6844, 0.4], // 평창
  [128.6216, 37.6910, 0.4], // 강릉
  [128.3000, 37.8000, 0.4], // 양양
  [127.6800, 37.1700, 0.4], // 영월
  [128.0800, 37.3800, 0.4], // 인제
  [127.9800, 38.1000, 0.4], // 고성
  [128.5700, 37.3800, 0.4], // 평창 남부
  [128.0800, 37.8000, 0.4], // 화천

  // 충청도 (20개 고루 분포)
  [127.3845, 36.3504, 0.8], // 대전
  [127.4294, 36.6424, 0.6], // 청주
  [126.9784, 36.5663, 0.5], // 천안
  [127.1190, 36.5110, 0.5], // 아산
  [127.4889, 36.3217, 0.4], // 세종
  [127.2527, 36.3326, 0.5], // 공주
  [127.3467, 36.9910, 0.5], // 충주
  [127.4436, 36.7810, 0.5], // 진천
  [127.4357, 36.6060, 0.5], // 증평
  [127.5897, 36.7845, 0.5], // 괴산
  [127.6710, 36.7810, 0.5], // 음성
  [127.4914, 36.3221, 0.5], // 세종 남부
  [127.2012, 36.4801, 0.5], // 논산
  [127.1190, 36.8120, 0.5], // 제천
  [127.4935, 36.3221, 0.5], // 보은
  [127.2012, 36.8120, 0.5], // 옥천
  [126.8454, 36.6013, 0.5], // 서산
  [127.1190, 36.3210, 0.5], // 계룡
  [127.2012, 36.3210, 0.5], // 금산
  [127.4935, 36.8120, 0.5], // 영동

  // 경상북도 (포인트 대폭 추가)
  [128.6014, 35.8714, 0.9], // 대구
  [129.0756, 35.1796, 0.9], // 부산
  [128.6811, 35.2383, 0.7], // 창원
  [129.3114, 35.5384, 0.7], // 울산
  [128.1087, 35.8428, 0.6], // 구미
  [128.5912, 35.8883, 0.5], // 경산
  [128.7375, 35.8392, 0.5], // 영천
  [128.3222, 36.1190, 0.5], // 영주
  [128.4395, 35.7911, 0.6], // 김천
  [129.2831, 36.0190, 0.5], // 포항
  [128.7336, 36.5622, 0.5], // 안동
  [129.4000, 36.5500, 0.4], // 영덕
  [128.9000, 36.0000, 0.4], // 의성
  [128.5000, 36.6500, 0.4], // 예천
  [129.2000, 36.7000, 0.4], // 울진
  [128.8000, 36.9000, 0.4], // 봉화
  [129.1000, 36.3500, 0.4], // 청송
  [128.4000, 36.3500, 0.4], // 문경
  [128.2000, 36.6000, 0.4], // 상주

  // 전라남도 (포인트 대폭 추가)
  [126.8526, 35.1596, 0.8], // 광주
  [127.1522, 35.8242, 0.6], // 전주
  [126.4620, 34.8121, 0.5], // 목포
  [127.2891, 35.6469, 0.5], // 순천
  [127.7145, 35.0151, 0.4], // 여수
  [126.7159, 35.2752, 0.4], // 나주
  [126.9156, 35.9566, 0.5], // 익산
  [127.0000, 34.9500, 0.4], // 해남
  [126.7000, 34.8000, 0.4], // 영암
  [127.1000, 35.3000, 0.4], // 곡성
  [127.2000, 34.9000, 0.4], // 보성
  [126.9000, 35.4000, 0.4], // 함평
  [127.3000, 35.0000, 0.4], // 고흥
  [127.0000, 35.4000, 0.4], // 담양
  [126.8000, 35.2000, 0.4], // 무안

  // 전라북도 (포인트 대폭 추가)
  [127.1522, 35.8242, 0.6], // 전주
  [126.8830, 35.5694, 0.5], // 군산
  [127.0000, 35.6000, 0.4], // 익산
  [127.2000, 35.6000, 0.4], // 정읍
  [127.4000, 35.7000, 0.4], // 남원
  [127.0000, 35.9000, 0.4], // 김제
  [127.2000, 35.9000, 0.4], // 완주
  [127.4000, 36.0000, 0.4], // 진안
  [127.6000, 35.8000, 0.4], // 무주
  [127.0000, 36.2000, 0.4], // 순창
  [127.2000, 36.2000, 0.4], // 부안
  [127.4000, 36.2000, 0.4], // 고창

  // 제주도
  [126.5312, 33.4996, 0.7], // 제주시
  [126.5618, 33.2530, 0.5], // 서귀포

  // 기타
  [131.8652, 37.2424, 0.7], // 독도
];

// 데이터를 OpenLayers Feature로 변환
const features = data.map(([lon, lat, weight]) => {
  const feature = new ol.Feature({
    geometry: new ol.geom.Point(ol.proj.fromLonLat([lon, lat])),
    weight: weight // 바로 가중치 적용
  });
  return feature;
});

// 히트맵 레이어 생성
const heatmapLayer = new ol.layer.Heatmap({
  source: new ol.source.Vector({
    features: features // 모든 feature를 한 번에 추가
  }),
  blur: 20,
  radius: 30,
  weight: function(feature) {
    return feature.get('weight');
  },
  gradient: [
    'rgba(255,255,255,0)',
    'rgba(255,255,255,0.3)',
    'rgba(255,255,255,0.5)',
    'rgba(255,255,255,0.7)',
    'rgba(255,255,255,0.9)'
  ]
});

// 다크 테마 레이어 생성 (OpenStreetMap 다크 스타일)
const baseLayer = new ol.layer.Tile({
  source: new ol.source.XYZ({
    url: 'https://cartodb-basemaps-{a-d}.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png',
    attributions: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>'
  })
});

// 지도 생성
const map = new ol.Map({
  target: 'map',
  layers: [baseLayer, heatmapLayer],
  view: new ol.View({
    center: ol.proj.fromLonLat([127.7669, 36.2084]), // 대한민국 중심점
    zoom: 7 // 전국이 보이도록 줌 레벨 조정
  })
}); 
